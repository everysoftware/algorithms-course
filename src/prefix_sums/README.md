# Префиксные суммы

## Подпоследовательности и подмассивы

Последовательность `S` называется **подпоследовательностью** последовательности `A`, если она может быть получена
из `A` путем удаления некоторых (или нуля) элементов без изменения порядка оставшихся элементов. Например,
`[3, 6, 2]` является подпоследовательностью последовательности `[0, 3, 1, 6, 2, 2, 7]`.

Подпоследовательность `S` называется **непрерывной**, если она состоит из подряд идущих элементов
последовательности `A`.
Например, `[3, 1, 6]` является непрерывной подпоследовательностью последовательности `[0, 3, 1, 6, 2, 2, 7]`,
а `[3, 1, 2]`
не является.

Непрерывную подпоследовательность в массиве называют **подмассивом**. Например, подмассивами массива `[1, 2, 3, 4]`
являются `[1]`,
`[2]`, `[3]`, `[4]`, `[1, 2]`, `[2, 3]`, `[3, 4]`, `[1, 2, 3]`, `[2, 3, 4]`, `[1, 2, 3, 4]`.

Непрерывную подпоследовательность в строке называют **подстрокой**. Например, подстроками строки `abc`
являются `a`, `b`, `c`,
`ab`, `bc`, `abc`.

## Префиксные суммы

**Префиксные суммы** - это способ быстро вычислять сумму элементов подмассива. Для этого нужно
заранее посчитать
сумму всех элементов от начала массива до каждой позиции и сохранить эти значения в другом массиве, называемом
**массивом префиксных сумм**. Тогда сумма на
любой части непрерывной части массива может быть найдена за константное время, вычитая два значения из массива
префиксных сумм.

Префиксную сумму ещё называют **частичной суммой** или **префиксом**.

Вот как это работает:

Если у нас есть входная последовательность чисел `x1, x2, x3, ...`, то префиксные суммы будут выглядеть так: `y0, y1,
y2, ...`, где каждый `yi` вычисляется следующим образом:

`y0 = 0`,
`y1 = x1 = y0 + x1`,
`y2 = x1 + x2 = y1 + x2`,
`y3 = x1 + x2 + x3 = y2 + x3`,
`...`,
`yi = y(i-1) + xi`.

Например, для последовательности чисел `[52, 98, 67, 5, 99, 46, 54, 28, 100, 4]` префиксные суммы будут выглядеть
так: `[0, 52, 150, 217, 222, 321, 367, 421, 449, 549, 553]`. Чтобы найти
сумму элементов на отрезке `[3, 7]`, нужно вычесть два префикса: `y7 - y2 = 421 - 150 = 271`.

**Префиксные суммы в Python**

В Python префиксные суммы могут быть вычислены с помощью функции `itertools.accumulate` из стандартной библиотеки. Вот
как это работает:

```python
import itertools

sequence = [52, 98, 67, 5, 99, 46, 54, 28, 100, 4]
prefix_sums = list(itertools.accumulate(sequence, initial=0))

# prefix_sums = [0, 52, 150, 217, 222, 321, 367, 421, 449, 549, 553]
```
