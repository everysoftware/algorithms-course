from typing import Any

import pytest

from src.k_number_theory.count_primes import count_primes_sieve, count_primes_sqrt


@pytest.mark.parametrize("func", [count_primes_sqrt, count_primes_sieve])
@pytest.mark.parametrize(
    ("n", "expected"),
    [
        (1, 0),  # []
        (2, 0),  # []
        (3, 1),  # [2]
        (4, 2),  # [2, 3]
        (5, 2),  # [2, 3]
        (6, 3),  # [2, 3, 5]
        (7, 3),  # [2, 3, 5]
        (8, 4),  # [2, 3, 5, 7]
        (9, 4),  # [2, 3, 5, 7]
        (10, 4),  # [2, 3, 5, 7]
        (11, 4),  # [2, 3, 5, 7]
        (12, 5),  # [2, 3, 5, 7, 11]
        (13, 5),  # [2, 3, 5, 7, 11]
        (14, 6),  # [2, 3, 5, 7, 11, 13]
        (15, 6),  # [2, 3, 5, 7, 11, 13]
        (16, 6),  # [2, 3, 5, 7, 11, 13]
        (17, 6),  # [2, 3, 5, 7, 11, 13]
        (18, 7),  # [2, 3, 5, 7, 11, 13, 17]
        (19, 7),  # [2, 3, 5, 7, 11, 13, 17]
        (20, 8),  # [2, 3, 5, 7, 11, 13, 17, 19]
        (21, 8),  # [2, 3, 5, 7, 11, 13, 17, 19]
        (22, 8),  # [2, 3, 5, 7, 11, 13, 17, 19]
        (23, 8),  # [2, 3, 5, 7, 11, 13, 17, 19]
        (24, 9),  # [2, 3, 5, 7, 11, 13, 17, 19, 23]
        (25, 9),  # [2, 3, 5, 7, 11, 13, 17, 19, 23]
        (26, 9),  # [2, 3, 5, 7, 11, 13, 17, 19, 23]
        (27, 9),  # [2, 3, 5, 7, 11, 13, 17, 19, 23]
    ],
)
def test_count_primes(func: Any, n: int, expected: int) -> None:
    assert func(n) == expected
